const CACHE_NAME="app-cache-v5",BASE_URL=self.location.pathname.replace(/\/[^/]*$/,""),PRECACHE_URLS=[`${BASE_URL}./`,`${BASE_URL}./index.html`,`${BASE_URL}./bundle.js`,`${BASE_URL}./manifest.json`,`${BASE_URL}./icons/icon-192x192.png`,`${BASE_URL}./icons/icon-512x512.png`];self.addEventListener("install",e=>{e.waitUntil((async()=>{const e=await caches.open(CACHE_NAME);await Promise.all(PRECACHE_URLS.map(a=>e.add(a).catch(e=>console.warn("Skip caching",a,e)))),self.skipWaiting()})())}),self.addEventListener("activate",e=>{e.waitUntil((async()=>{const e=await caches.keys();await Promise.all(e.filter(e=>e!==CACHE_NAME).map(e=>caches.delete(e))),await self.clients.claim()})())}),self.addEventListener("fetch",e=>{const a=e.request;"navigate"!==a.mode?e.respondWith(caches.match(a).then(e=>e||fetch(a))):e.respondWith(caches.match("./index.html").then(e=>e||fetch(a)))});